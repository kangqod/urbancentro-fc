import{r as h,aI as e,aH as ce}from"./vendor-Cj8xhtWi.js";import{T as C,R as $,C as k,a as z,B as j,F as O,s as X,A as le,b as de,c as Q,M as me,I as ue,S as he,d as D,e as pe,L as U,f as fe}from"./antd-B7C1Q8-q.js";import{U as F,A as q,P as ye,C as xe,a as Te,b as Ee,c as ee,d as be,S as je,M as Se,e as ge,f as Ie,R as Ne,g as Pe}from"./lucide-react-J9mTSuFE.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const p of t.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function a(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(n){if(n.ep)return;n.ep=!0;const t=a(n);fetch(n.href,t)}})();const b={TEAM_SETUP:"team-setup",PLAYER_SELECTION:"player-selection",TEAM_DISTRIBUTION:"team-distribution"},se={FIVE_TWO_TEAMS:{ID:"5:5",TITLE:"5 vs 5",DESCRIPTION:"총 10명",TEAMS:2,PLAYERS_PER_TEAM:5},SIX_TWO_TEAMS:{ID:"6:6",TITLE:"6 vs 6",DESCRIPTION:"총 12명",TEAMS:2,PLAYERS_PER_TEAM:6},SEVEN_TWO_TEAMS:{ID:"7:7",TITLE:"7 vs 7",DESCRIPTION:"총 14명",TEAMS:2,PLAYERS_PER_TEAM:7},FIVE_THREE_TEAMS:{ID:"5:5:5",TITLE:"5 vs 5 vs 5",DESCRIPTION:"총 15명",TEAMS:3,PLAYERS_PER_TEAM:5},SIX_THREE_TEAMS:{ID:"6:6:6",TITLE:"6 vs 6 vs 6",DESCRIPTION:"총 18명",TEAMS:3,PLAYERS_PER_TEAM:6},SEVEN_THREE_TEAMS:{ID:"7:7:7",TITLE:"7 vs 7 vs 7",DESCRIPTION:"총 21명",TEAMS:3,PLAYERS_PER_TEAM:7}},M={FORWARD:"forward",MIDFIELDER:"midfielder",DEFENDER:"defender"},g={HIGH:"high",MID:"mid"},Ae=M.MIDFIELDER,te=g.MID,H="#ff681f",Y="2099",{Title:B,Text:K}=C,W={TEAM:32,ARROW:16},Re=Object.values(se).map(i=>({id:i.ID,title:i.TITLE,description:i.DESCRIPTION}));function we({onNext:i,onSelectTeamOption:r}){const[a,l]=h.useState(null),n=t=>{l(t);const p=Object.values(se).find(o=>o.ID===t);p&&r(p.TEAMS*p.PLAYERS_PER_TEAM,p.TEAMS)};return e.jsxs("div",{className:"team-setup-container",children:[e.jsxs("div",{className:"team-setup-header",children:[e.jsx(B,{level:4,children:"팀 구성 선택"}),e.jsx(K,{type:"secondary",children:"원하는 팀 구성을 선택해주세요"})]}),e.jsx($,{gutter:[16,16],className:"team-option-row",children:Re.map(t=>e.jsx(k,{xs:12,md:8,children:e.jsx(z,{hoverable:!0,className:`team-option-card ${a===t.id?"selected":""}`,onClick:()=>n(t.id),children:e.jsxs("div",{className:"team-option-content",children:[e.jsx(F,{size:W.TEAM,className:a===t.id?"icon-selected":"icon-default"}),e.jsx(B,{level:5,className:"option-title",children:t.title}),e.jsx(K,{type:"secondary",children:t.description})]})})},t.id))}),e.jsx("div",{className:"next-button-container",children:e.jsx(j,{type:"primary",size:"large",icon:e.jsx(q,{size:W.ARROW}),onClick:i,disabled:!a,className:"next-button",children:"다음"})})]})}const ve=[{year:"2099",number:90,name:"지원자",position:"defender",condition:"mid"},{year:"2099",number:91,name:"지원자2",position:"defender",condition:"mid"},{year:"1973",number:10,name:"김정표",position:"forward",condition:"mid"},{year:"1984",number:30,name:"최현석",position:"midfielder",condition:"mid"},{year:"1985",number:9,name:"전인정",position:"forward",condition:"mid"},{year:"1986",number:11,name:"김성일",position:"forward",condition:"mid"},{year:"1986",number:51,name:"송승근",position:"defender",condition:"mid"},{year:"1986",number:28,name:"조용일",position:"defender",condition:"mid"},{year:"1987",number:33,name:"강병용",position:"defender",condition:"mid"},{year:"1987",number:20,name:"박준우",position:"midfielder",condition:"mid"},{year:"1987",number:17,name:"양성호",position:"defender",condition:"mid"},{year:"1987",number:19,name:"홍승우",position:"midfielder",condition:"mid"},{year:"1988",number:0,name:"우상욱",position:"defender",condition:"mid"},{year:"1989",number:0,name:"박근휘",position:"forward",condition:"mid"},{year:"1989",number:8,name:"김동수",position:"midfielder",condition:"mid"},{year:"1989",number:0,name:"박준범",position:"midfielder",condition:"mid"},{year:"1989",number:1,name:"윤용준",position:"midfielder",condition:"mid"},{year:"1989",number:4,name:"이원식",position:"forward",condition:"mid"},{year:"1989",number:12,name:"이한별",position:"forward",condition:"mid"},{year:"1989",number:22,name:"임은철",position:"forward",condition:"mid"},{year:"1989",number:31,name:"장세원",position:"forward",condition:"mid"},{year:"1989",number:42,name:"최승빈",position:"forward",condition:"mid"},{year:"1989",number:7,name:"이원재",position:"midfielder",condition:"mid"},{year:"1990",number:5,name:"박치환",position:"midfielder",condition:"mid"},{year:"1990",number:13,name:"이민수",position:"defender",condition:"mid"},{year:"1990",number:24,name:"임시현",position:"midfielder",condition:"mid"},{year:"1991",number:6,name:"김백상",position:"midfielder",condition:"mid"},{year:"1991",number:0,name:"김혁준",position:"defender",condition:"mid"},{year:"1993",number:0,name:"황윤하",position:"forward",condition:"mid"}],{Title:Oe,Text:V}=C,A=16;function Me({onNext:i,onPrev:r,requiredCount:a,onPlayersSelected:l,activeTab:n}){const[t,p]=h.useState(ve.map(s=>({id:`${s.year}-${s.name}-${s.number}`,name:s.name,year:s.year,position:s.position,condition:s.condition||te,number:s.number,isGuest:!1,isParticipating:s.year!==Y}))),[o,c]=h.useState(!1),[d]=O.useForm(),[y,u]=h.useState(0),[T,N]=X.useMessage();h.useEffect(()=>{const s=t.filter(m=>m.isParticipating).length;u(s)},[]);const E=h.useCallback(s=>s===0?{type:"warning",message:`${a}명의 선수를 선택해주세요`}:s<a?{type:"warning",message:`${a-s}명이 더 필요합니다`}:s>a?{type:"error",message:`${s-a}명이 초과되었습니다`}:{type:"success",message:"인원이 맞습니다"},[a]),I=s=>{p(m=>{const f=m.map(x=>x.id===s?{...x,isParticipating:!x.isParticipating}:x),S=f.filter(x=>x.isParticipating).length;return u(S),f})},P=s=>{const m={id:`guest-${Date.now()}`,name:s.name,number:0,year:Y,position:Ae,isGuest:!0,isParticipating:!0};p(f=>{const S=[m,...f],x=S.filter(w=>w.isParticipating).length;return u(x),S}),c(!1),d.resetFields()},R=E(y),_=()=>{const s=t.filter(m=>m.isParticipating);l(s),i()};return h.useEffect(()=>{const s=E(y);n===b.PLAYER_SELECTION&&T.open({key:"player-selection",type:s.type,content:s.message})},[y,E,T,n]),e.jsxs("div",{className:"player-selection-container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx(Oe,{level:4,children:"선수 선택"}),e.jsx(V,{type:"secondary",children:"참여할 선수를 선택해주세요"})]}),e.jsxs("div",{className:"control-panel",children:[e.jsx(j,{type:"dashed",icon:e.jsx(ye,{size:A}),onClick:()=>c(!0),className:"guest-add-button",children:"게스트 추가"}),e.jsx(le,{showIcon:!0,message:R.message,type:R.type,icon:R.type==="success"?e.jsx(xe,{size:A}):e.jsx(Te,{size:A}),className:"status-alert"})]}),e.jsx("div",{className:"players-scroll-container",children:e.jsx($,{gutter:[16,16],className:"player-row",children:t.map(s=>e.jsx(k,{xs:12,sm:12,md:8,children:e.jsx(z,{hoverable:!0,className:`player-card ${s.isParticipating?"selected":""}`,onClick:()=>I(s.id),children:e.jsxs("div",{className:"player-card-content",children:[e.jsx(de,{checked:s.isParticipating}),e.jsx("div",{className:"player-info",children:e.jsxs("div",{className:"player-name-container",children:[e.jsxs(V,{strong:!0,children:[s.year.slice(-2)," ",s.name]}),s.isGuest&&e.jsx(Q,{count:"G",style:{backgroundColor:H}})]})})]})})},s.id))})}),e.jsx("div",{className:"next-button-container player-selection",children:e.jsxs("div",{className:"button-group",children:[e.jsx(j,{size:"large",icon:e.jsx(Ee,{size:A}),onClick:r,className:"prev-button",children:"이전"}),e.jsx(j,{type:"primary",size:"large",icon:e.jsx(q,{size:A}),onClick:_,disabled:y!==a,className:"next-button",children:"다음"})]})}),e.jsx(me,{title:"게스트 추가",width:350,open:o,onCancel:()=>c(!1),footer:null,children:e.jsxs(O,{form:d,layout:"vertical",onFinish:P,children:[e.jsx(O.Item,{name:"name",label:"이름",rules:[{required:!0,message:"이름을 입력해주세요"}],children:e.jsx(ue,{placeholder:"게스트 이름"})}),e.jsx(O.Item,{className:"modal-footer",children:e.jsx(j,{type:"primary",htmlType:"submit",icon:e.jsx(ee,{size:A}),className:"add-guest-button",children:"추가하기"})})]})}),N]})}function J(i){return i.sort(()=>Math.random()-.5)}function Ce(i,r){const l=r.split(":").map(Number).length,n={};i.forEach(o=>{n[o.position]||(n[o.position]=[]),n[o.position].push(o)});const t=Array.from({length:l},(o,c)=>({id:String(c+1),name:`팀 ${String.fromCharCode(65+c)}`,players:[]})),p=o=>{if(!n[o]||n[o].length===0)return;J(n[o]);const c=[...n[o]];for(let d=0;d<l&&c.length>0;d++){const y=c.shift();t[d].players.push(y)}for(;c.length>0;){const d=c.shift();t.reduce((u,T)=>T.players.length<u.players.length?T:u,t[0]).players.push(d)}n[o]=[]};return p(M.DEFENDER),p(M.FORWARD),Object.entries(n).forEach(([o,c])=>{c.length>0&&(J(c),c.forEach(d=>{t.reduce((u,T)=>T.players.length<u.players.length?T:u,t[0]).players.push(d)}))}),t.forEach(o=>{De(o),o.players.sort((c,d)=>c.year.localeCompare(d.year))}),t}const _e=i=>{const r=window.Kakao,a=window.location.origin+window.location.pathname,l=i.teams?`?teams=${JSON.stringify(i.teams)}`:"",n=a+l;r.Share.sendDefault({objectType:"text",text:i.description,link:{webUrl:n,mobileWebUrl:n}})};function De(i){i.players.forEach(a=>{a.condition=g.MID});const r=i.players.length-1;for(let a=0;a<=r;a++){if(a===0||a===r){i.players[a].condition=g.HIGH;continue}const l=a===1?.7:a===2?.5:.02;Math.random()<l&&(i.players[a].condition=g.HIGH,console.log(a))}}const{Title:Le,Text:Z}=C;function $e({onPrev:i,selectedPlayers:r,teamCount:a}){const[l,n]=h.useState([]),[t,p]=h.useState([]),[o,c]=h.useState(!0),[d,y]=X.useMessage(),[u,T]=h.useState(!1);h.useEffect(()=>{const s=new URLSearchParams(window.location.search);T(s.has("teams"))},[]),h.useEffect(()=>{p([...r])},[r]),h.useEffect(()=>{(t.length>0||u)&&N(u)},[t,u]);const N=async s=>{try{if(c(!0),s){const S=new URLSearchParams(window.location.search).get("teams");if(S)try{const w=JSON.parse(S).map((v,G)=>({id:String(G+1),name:`팀 ${v[0]}`,players:v[1].map((ne,ae)=>{const[ie,re,oe]=ne.split("-");return{id:`shared-${G}-${ae}`,name:re,year:ie,position:M.MIDFIELDER,condition:oe||te,isGuest:!0}})}));n(w);return}catch{d.error("팀 데이터를 불러오는데 실패했습니다");return}}const m=await new Promise((f,S)=>setTimeout(()=>{try{const x=Math.ceil(t.length/a),w=Array(a).fill(x).join(":"),v=Ce(t,w);f(v)}catch(x){S(x)}},800));n(m)}catch(m){d.error(m.message)}finally{c(!1)}},E=()=>l.map(s=>{const m=s.players.map(f=>`${f.year?`${f.year.slice(-2)}`:"99"} ${f.name} ${f.condition===g.HIGH?"↑":""}`).join(`
`);return`${s.name}
${m}`}).join(`

`),I=async()=>{try{const s=E();navigator.share?await navigator.share({title:"팀 분배 결과",text:s}):(await navigator.clipboard.writeText(s),d.success("클립보드에 복사되었습니다"))}catch(s){s instanceof Error&&s.message!=="Share canceled"&&d.error("공유에 실패했습니다"),console.error("공유 실패:",s.message)}},P=async()=>{try{const s=E();await navigator.clipboard.writeText(s),d.success("클립보드에 복사되었습니다")}catch(s){d.error("복사에 실패했습니다"),console.error("복사 실패:",s)}},R=()=>{const s=l.map(m=>[m.name.slice(-1),m.players.map(f=>`${f.year?`${f.year.slice(-2)}`:"99"}-${f.name}-${f.condition===g.HIGH?g.HIGH:""}`)]);_e({description:E(),teams:s})},_=()=>{c(!0),p([]),i()};return e.jsxs("div",{className:"team-distribution-container",children:[y,e.jsxs("div",{className:"header",children:[e.jsx(Le,{level:4,children:"팀 분배"}),e.jsx(Z,{type:"secondary",children:"랜덤으로 팀을 구성했습니다"})]}),o?e.jsx("div",{className:"loading-container",children:e.jsx(he,{size:"large",style:{fontSize:"48px"}})}):e.jsx($,{gutter:[8,8],className:"team-row",children:l.map(s=>e.jsx(k,{xs:8,md:8,children:e.jsx(z,{title:e.jsxs("div",{className:"team-header",children:[e.jsx("span",{children:s.name}),e.jsx(Q,{count:s.players.length})]}),className:"team-card",children:e.jsx("div",{className:"player-list",children:s.players.map(m=>e.jsxs("div",{className:"player-item",children:[e.jsxs(Z,{children:[m.year?`${m.year.slice(-2)} `:"G ",m.name]}),m.condition===g.HIGH&&e.jsx(be,{className:"arrow-big-up"})]},m.id))})})},s.id))}),!u&&e.jsxs("div",{className:"button-container",children:[e.jsxs("div",{className:"share-icons",children:[e.jsx(D,{title:"공유하기",children:e.jsx(j,{type:"text",icon:e.jsx(je,{size:24}),onClick:I,className:"share-icon-button"})}),e.jsx(D,{title:"카카오톡 공유",children:e.jsx(j,{type:"text",icon:e.jsx(Se,{size:24}),onClick:R,className:"share-icon-button kakao"})}),e.jsx(D,{title:"클립보드에 복사",children:e.jsx(j,{type:"text",icon:e.jsx(ge,{size:24}),onClick:P,className:"share-icon-button clipboard"})})]}),e.jsxs("div",{className:"button-group",children:[e.jsx(j,{type:"default",onClick:_,className:"action-button prev-button",icon:e.jsx(Ie,{size:16}),children:"이전"}),!u&&e.jsx(j,{type:"primary",size:"large",icon:e.jsx(Ne,{size:16}),onClick:()=>N(!1),disabled:o,className:"action-button shuffle-button",children:"다시 섞기"})]})]})]})}const L=20,ke=16;function ze({activeTab:i,onChangeTab:r}){const[a,l]=h.useState(0),[n,t]=h.useState([]),[p,o]=h.useState(2);h.useEffect(()=>{const y=new URLSearchParams(window.location.search).get("teams");if(y)try{const u=JSON.parse(decodeURIComponent(y)),T=u.reduce((E,I)=>E+I[1].length,0);o(u.length),l(T);const N=u.flatMap((E,I)=>E[1].map(P=>({id:`shared-${I}-${P}`,name:P,number:0,year:"99",isGuest:!0,selected:!0})));t(N),r(b.TEAM_DISTRIBUTION)}catch(u){console.error("Invalid teams parameter:",u)}},[r]);const c=[{key:b.TEAM_SETUP,label:e.jsxs("div",{className:"tab-label",children:[e.jsx(F,{size:L}),e.jsx("span",{children:"팀 구성"})]}),children:e.jsx(we,{onNext:()=>r(b.PLAYER_SELECTION),onSelectTeamOption:(d,y)=>{l(d),o(y)}})},{key:b.PLAYER_SELECTION,label:e.jsxs("div",{className:"tab-label",children:[e.jsx(ee,{size:L}),e.jsx("span",{children:"선수 선택"})]}),children:e.jsx(Me,{onNext:()=>r(b.TEAM_DISTRIBUTION),onPrev:()=>r(b.TEAM_SETUP),requiredCount:a,onPlayersSelected:t,activeTab:i})},{key:b.TEAM_DISTRIBUTION,label:e.jsxs("div",{className:"tab-label",children:[e.jsx(Pe,{size:L}),e.jsx("span",{children:"팀 분배"})]}),children:e.jsx($e,{onPrev:()=>r(b.PLAYER_SELECTION),selectedPlayers:n,teamCount:p})}];return e.jsx(pe,{activeKey:i,items:c,className:"team-tabs",centered:!0,size:"large",tabBarGutter:ke})}const{Header:Ue}=U,{Title:Fe}=C;function He(){return e.jsx(Ue,{className:"team-header",onClick:()=>window.location.href="/urbancentro-fc",children:e.jsxs("div",{className:"team-header-content",children:[e.jsx(F,{size:24,style:{color:H}}),e.jsx(Fe,{level:4,style:{margin:0,color:"#1f2937"},children:"Urbancentro FC"})]})})}function Ge(){return h.useEffect(()=>{const i=window.Kakao;i&&(i.isInitialized()||i.init("5b53b82753893f8da896b25aedba8dbe"))},[]),null}function Ye(){const[i,r]=h.useState(b.TEAM_SETUP);function a(l){r(l)}return{activeTab:i,handleTabChange:a}}const{Content:Be}=U;function Ke(){const{activeTab:i,handleTabChange:r}=Ye();return e.jsxs(fe,{theme:{token:{colorPrimary:H,borderRadius:6}},children:[e.jsxs(U,{className:"app-layout",children:[e.jsx(He,{}),e.jsx(Be,{className:"app-content",children:e.jsx(ze,{activeTab:i,onChangeTab:r})})]}),e.jsx(Ge,{})]})}ce.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(Ke,{})}));
